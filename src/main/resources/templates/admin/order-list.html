<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<head>
    <title th:text="${title} ?: 'Danh sách đơn hàng'">Danh sách đơn hàng</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        .table th, .table td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid #dee2e6;
        }
        .table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }
        .button-primary {
            background-color: #007bff;
            border: none;
            color: white;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            transition-duration: 0.4s;
            cursor: pointer;
            border-radius: 5px;
        }
        .button-primary:hover {
            background-color: #0056b3;
        }
        /* CSS for status colors */
        .status-pending { color: #6c757d; }
        .status-processing { color: #17a2b8; }
        .status-shipped { color: #28a745; }
        .status-delivered { color: #ffc107; }
        .status-cancelled { color: #dc3545; }
    </style>
</head>
<body>
<section layout:fragment="content">
    <h1>Danh sách đơn hàng</h1>

    <div class="table-responsive">
        <table class="table">
            <thead>
            <tr>
                <th>Mã đơn hàng</th>
                <th>Khách hàng</th>
                <th>Địa chỉ</th>
                <th>Phương thức thanh toán</th>
                <th>Tình trạng</th>
                <th>Thao tác</th>
                <th>Xuất hóa đơn</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="order : ${orders}" th:class="'status-' + ${order.orderStatus != null ? order.orderStatus.name().toLowerCase() : 'default'}">
                <td th:text="${order.id}">1</td>
                <td th:text="${order.customerName}">Người mua hàng</td>
                <td th:text="${order.shippingAddress}">Địa chỉ giao hàng</td>
                <td th:text="${order.paymentMethod}">Thanh toán khi nhận hàng</td>
                <td>
                    <!-- Display current status with dynamic CSS class -->
                    <span th:if="${order.orderStatus != null}"
                          th:text="${order.orderStatus.getDisplayName()}"></span>
                </td>
                <td><a th:href="@{/admin/detail/{id}(id=${order.id})}" class="button-primary">Xem chi tiết</a></td>
                <td><a th:href="@{/admin/invoice/{id}(id=${order.id})}" class="btn btn-success">Xuất hóa đơn</a></td>
            </tr>
            </tbody>
        </table>
    </div>
</section>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
